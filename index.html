<html>

<head>
  <base href="https://websim.creativeengine.ai/hackersim/">
  <meta charset="UTF-8">
  <title>CyberVoid: Симулятор Смачного Хакера</title>
  <style>
    body,
    html {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: #000;
      color: #0F0;
      font-family: 'Consolas', 'Courier New', monospace;
      overflow: hidden;
    }

    #terminal {
      height: calc(100% - 60px);
      padding: 10px;
      box-sizing: border-box;
      overflow-y: auto;
      position: relative;
    }

    #input-line {
      display: flex;
      align-items: center;
    }

    #prompt {
      color: #0F0;
      margin-right: 5px;
    }

    #command-input {
      background-color: transparent;
      border: none;
      color: #0F0;
      font-family: 'Consolas', 'Courier New', monospace;
      font-size: 14px;
      outline: none;
      width: 100%;
    }

    .output {
      margin-bottom: 5px;
    }

    #terminal::before {
      content: " ";
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
      z-index: 2;
      background-size: 100% 2px, 3px 100%;
      pointer-events: none;
    }

    #terminal-header {
      background-color: #0F0;
      color: #000;
      padding: 5px 10px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-button {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
      margin-left: 5px;
    }

    .close {
      background-color: #FF5F56;
    }

    .minimize {
      background-color: #FFBD2E;
    }

    .maximize {
      background-color: #27C93F;
    }

    #status-bar {
      background-color: #0F0;
      color: #000;
      padding: 5px 10px;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
    }

    #upgrades-menu {
      position: fixed;
      top: 50px;
      right: -300px;
      width: 280px;
      height: calc(100% - 60px);
      background-color: #001100;
      border: 2px solid #0F0;
      padding: 10px;
      transition: right 0.3s ease-in-out;
      overflow-y: auto;
    }

    #upgrades-menu.open {
      right: 10px;
    }

    .upgrade {
      border: 1px solid #0F0;
      margin-bottom: 10px;
      padding: 5px;
    }

    .upgrade h3 {
      margin: 0 0 5px 0;
    }

    .upgrade p {
      margin: 0 0 5px 0;
      font-size: 12px;
    }

    .upgrade button {
      background-color: #0F0;
      color: #000;
      border: none;
      padding: 2px 5px;
      cursor: pointer;
      font-family: 'Consolas', 'Courier New', monospace;
    }

    .upgrade button:disabled {
      background-color: #030;
      color: #060;
      cursor: not-allowed;
    }
  </style>
</head>

<body>
  <div id="terminal-header">
    <span>CyberVoid Terminal</span>
    <div>
      <span class="header-button minimize"></span>
      <span class="header-button maximize"></span>
      <span class="header-button close"></span>
    </div>
  </div>
  <div id="terminal">
    <div id="output"></div>
    <div id="input-line">
      <span id="prompt">root@cybervoid:~#</span>
      <input type="text" id="command-input" autofocus>
    </div>
  </div>
  <div id="status-bar">
    <span id="balance">Баланс: 0 BTC</span>
    <span id="status">Статус: В сети</span>
  </div>
  <div id="upgrades-menu">
    <h2>Улучшения</h2>
    <div id="upgrades-list"></div>
  </div>

  <script>
    const output = document.getElementById('output');
    const input = document.getElementById('command-input');
    const balanceElement = document.getElementById('balance');
    const upgradesMenu = document.getElementById('upgrades-menu');
    const upgradesList = document.getElementById('upgrades-list');

    let balance = 0;
    let lastHackTime = 0;
    let hackCooldown = 25000; // 25 секунд
    let hackSuccessChance = 0.4;
    let hackRewardMultiplier = 1;
    let criticalHackChance = 0.05;
    let detectionChance = 0.1;

    const upgrades = [
      {
        name: 'Улучшенный процессор',
        description: 'Увеличивает шанс успешного взлома на 2%.',
        cost: 0.1,
        effect: () => { hackSuccessChance += 0.02; },
        count: 0
      },
      {
        name: 'Расширенная память',
        description: 'Увеличивает награду за успешный взлом на 5%.',
        cost: 0.15,
        effect: () => { hackRewardMultiplier *= 1.05; },
        count: 0
      },
      {
        name: 'Квантовый алгоритм',
        description: 'Сокращает время между взломами на 1 секунду.',
        cost: 0.2,
        effect: () => { hackCooldown -= 1000; },
        count: 0
      },
      {
        name: 'Нейронная сеть',
        description: 'Увеличивает шанс критического взлома на 1%.',
        cost: 0.25,
        effect: () => { criticalHackChance += 0.01; },
        count: 0
      },
      {
        name: 'Стелс-модуль',
        description: 'Уменьшает шанс обнаружения на 2%.',
        cost: 0.3,
        effect: () => { detectionChance = Math.max(0, detectionChance - 0.02); },
        count: 0
      }
    ];

    loadGameData();

    const commands = {
      help: () => 'Доступные команды: help, hack, balance, upgrades, clear',
      balance: () => `Текущий баланс: ${balance.toFixed(8)} BTC`,
      upgrades: () => {
        upgradesMenu.classList.toggle('open');
        renderUpgrades();
        return 'Открыто меню улучшений.';
      },
      clear: () => {
        output.innerHTML = '';
        return '';
      },
      hack: async () => {
        const now = Date.now();
        if (now - lastHackTime < hackCooldown) {
          const remainingTime = Math.ceil((hackCooldown - (now - lastHackTime)) / 1000);
          return `Подождите еще ${remainingTime} секунд перед следующим взломом.`;
        }

        lastHackTime = now;
        const target = generateTarget();
        let success = Math.random() < hackSuccessChance;

        await simulateHacking(target, success);

        if (success) {
          const baseReward = (Math.random() * 0.1 + 0.01);
          let reward = baseReward * hackRewardMultiplier;

          const isCritical = Math.random() < criticalHackChance;
          if (isCritical) {
            reward *= 2;
            output.innerHTML += '<div class="output">Критический взлом! Награда удвоена!</div>';
          }

          balance += reward;
          updateBalance();
          return `Взлом успешен! Получено ${reward.toFixed(8)} BTC.`;
        } else {
          if (Math.random() < detectionChance) {
            return "Взлом не удался. Система безопасности обнаружила вторжение.";
          } else {
            return "Взлом не удался, но вам удалось избежать обнаружения.";
          }
        }
      }
    };

    function generateTarget() {
      const ips = ['192.168.1.1', '10.0.0.1', '172.16.0.1', '8.8.8.8'];
      const organizations = ['MegaCorp', 'TechGiant', 'DataHaven', 'CyberSec'];
      return {
        ip: ips[Math.floor(Math.random() * ips.length)],
        name: organizations[Math.floor(Math.random() * organizations.length)]
      };
    }

    async function simulateHacking(target, success) {
      const steps = [
        `Инициализация атаки на ${target.name} (${target.ip})...`,
        "Сканирование портов...",
        "Обнаружены уязвимости в системе безопасности...",
        "Внедрение эксплойта...",
        "Обход файервола...",
        "Получение доступа к системе...",
        "Повышение привилегий...",
        "Поиск ценных данных...",
        "Шифрование каналов связи...",
        "Скачивание данных...",
        success ? "Заметание следов..." : "Обнаружение вторжения системой безопасности!",
        "Завершение операции..."
      ];

      for (let step of steps) {
        await new Promise(resolve => setTimeout(resolve, Math.random() * 1000 + 500));
        const stepElement = document.createElement('div');
        stepElement.textContent = step;
        stepElement.classList.add('output');
        output.appendChild(stepElement);
        output.scrollTop = output.scrollHeight;
      }
    }

    function updateBalance() {
      balanceElement.textContent = `Баланс: ${balance.toFixed(8)} BTC`;
      saveGameData();
    }

    function saveGameData() {
      const gameData = {
        balance,
        upgrades: upgrades.map(u => u.count),
        hackSuccessChance,
        hackRewardMultiplier,
        criticalHackChance,
        detectionChance,
        hackCooldown
      };
      localStorage.setItem('hackerGameData', JSON.stringify(gameData));
    }

    function loadGameData() {
      const savedData = localStorage.getItem('hackerGameData');
      if (savedData) {
        const gameData = JSON.parse(savedData);
        balance = gameData.balance;
        hackSuccessChance = gameData.hackSuccessChance;
        hackRewardMultiplier = gameData.hackRewardMultiplier;
        criticalHackChance = gameData.criticalHackChance;
        detectionChance = gameData.detectionChance;
        hackCooldown = gameData.hackCooldown;
        upgrades.forEach((upgrade, index) => {
          upgrade.count = gameData.upgrades[index];
          for (let i = 0; i < upgrade.count; i++) {
            upgrade.effect();
          }
        });
      }
      updateBalance();
    }

    async function processInput(e) {
      if (e.key === 'Enter') {
        const cmd = input.value.toLowerCase();
        input.value = '';

        const cmdElement = document.createElement('div');
        cmdElement.innerHTML = `<span>root@cybervoid:~#</span> ${cmd}`;
        cmdElement.classList.add('output');
        output.appendChild(cmdElement);

        let result;
        if (cmd in commands) {
          result = await commands[cmd]();
        } else {
          result = `Команда не распознана: ${cmd}. Введите 'help' для списка команд.`;
        }

        const resultElement = document.createElement('div');
        resultElement.textContent = result;
        resultElement.classList.add('output');
        output.appendChild(resultElement);

        output.scrollTop = output.scrollHeight;
      }
    }

    function renderUpgrades() {
      upgradesList.innerHTML = '';
      upgrades.forEach((upgrade, index) => {
        const upgradeElement = document.createElement('div');
        upgradeElement.classList.add('upgrade');
        upgradeElement.innerHTML = `
      <h3>${upgrade.name}</h3>
      <p>${upgrade.description}</p>
      <p>Стоимость: ${upgrade.cost.toFixed(8)} BTC</p>
      <p>Уровень: ${upgrade.count}/5</p>
      <button onclick="buyUpgrade(${index})" ${balance < upgrade.cost || upgrade.count >= 5 ? 'disabled' : ''}>Купить</button>
    `;
        upgradesList.appendChild(upgradeElement);
      });
    }

    function buyUpgrade(index) {
      const upgrade = upgrades[index];
      if (balance >= upgrade.cost && upgrade.count < 5) {
        balance -= upgrade.cost;
        upgrade.count++;
        upgrade.effect();
        updateBalance();
        renderUpgrades();
        const resultElement = document.createElement('div');
        resultElement.textContent = `Улучшение "${upgrade.name}" приобретено.`;
        resultElement.classList.add('output');
        output.appendChild(resultElement);
        output.scrollTop = output.scrollHeight;
      }
    }

    input.addEventListener('keypress', processInput);

    // Initial message
    const initialMessage = document.createElement('div');
    initialMessage.innerHTML = `Добро пожаловать в CyberVoid Hacker Simulator v1.0<br>Введите 'help' для списка доступных команд.<br>`;
    initialMessage.classList.add('output');
    output.appendChild(initialMessage);
  </script>
</body>

</html>
